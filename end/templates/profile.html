{% extends 'frame.html' %}
{% block content %}

<div class="row-fluid">
<!-- block -->
<div class="block">
    <div class="block-content collapse in">
        <div class="span12">
            <form class="form-horizontal">
              <fieldset>
                <legend>用户信息</legend>
                <div class="control-group">
                  <label class="control-label">真实姓名<span class="required">*</span></label>
                  <div class="controls">
                    <span class="input-xlarge uneditable-input">王小五</span>
                  </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="typeahead">用户名<span class="required">*</span></label>
                    <div class="controls">
                        <input name="username" type="text" class="span6 m-wrap" />
                        <p class="help-block" name="username_help">限制条件：5~20个字符</p>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">旧密码</label>
                    <div class="controls">
                        <input name="oldpassword" type="text" class="span6 m-wrap"/>
                        <p style="display:none" class="help-block" name="oldpassword_help">原密码错误</p>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">新密码</label>
                    <div class="controls">
                        <input name="newpassword" type="text" class="span6 m-wrap"/>
                        <p class="help-block" name="newpassword_help">限制条件：6~20个字符</p>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">确认新密码</label>
                    <div class="controls">
                        <input name="confirmnewpassword" type="text" class="span6 m-wrap"/>
                        <p style="display:none" class="help-block" name="confirmnewpassword_help">与新密码不一致</p>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">手机<span class="required">*</span></label>
                    <div class="controls">
                        <input name="mobile" type="text" class="span6 m-wrap"/>
                        <p style="display:none" class="help-block" name="mobile_help">手机号码输入有误</p>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">电子邮箱<span class="required">*</span></label>
                    <div class="controls">
                        <input name="email" type="text" class="span6 m-wrap"/>
                        <p style="display:none" class="help-block" name="email_help">电子邮箱格式有误</p>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">联系地址<span class="required">*</span></label>
                    <div class="controls">
                        <input name="address" type="text" class="span6 m-wrap"/>
                        <p class="help-block" name="address_help">限制条件：1~60个字符</p>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">邮政编码<span class="required">*</span></label>
                    <div class="controls">
                        <input name="zipcode" type="text" class="span6 m-wrap"/>
                        <p style="display:none" class="help-block" name="zipcode_help">邮政编码有误</p>
                    </div>
                </div>
                <div class="control-group">
                  <label class="control-label">证件号码<span class="required">*</span></label>
                  <div class="controls">
                    <span class="input-xlarge uneditable-input">350802****0528****</span>
                  </div>
                </div>
                <div class="control-group">
                    <label class="control-label">有效证件类型<span class="required">*</span></label>
                    <div class="controls">
                        <select class="span6 m-wrap" name="idcardtype">
                            <option value="Category 1">身份证</option>
                            <option value="Category 2">台胞证</option>
                            <option value="Category 3">护照</option>
                        </select>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">出生年月<span class="required">*</span></label>
                    <div class="controls">
                        <input name="birthday" type="text" class="span6 m-wrap"/>
                        <p class="help-block" name="birthday_help">如：20150315</p>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">紧急联系人<span class="required">*</span></label>
                    <div class="controls">
                        <input name="contact" type="text" class="span6 m-wrap"/>
                        <p class="help-block" name="contact_help">限制条件：2~20个字符</p>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">紧急联系人手机<span class="required">*</span></label>
                    <div class="controls">
                        <input name="contactmobile" type="text" class="span6 m-wrap"/>
                        <p style="display:none" class="help-block" name="contactmobile_help">手机号码输入有误</p>
                    </div>
                </div>
                <div class="control-group">
                  <label class="control-label" for="fileInput">上传头像<span class="required">*</span></label>
                  <div class="controls">
                    <input class="input-file uniform_on" id="fileInput" type="file">
                  </div>
                </div>
                <div class="form-actions">
                  <button type="submit" class="btn btn-primary" onclick="return checkvalid();">保存修改</button>
                  <button type="reset" class="btn">取消</button>
                </div>
              </fieldset>
            </form>

        </div>
    </div>
</div>
<!-- /block -->
</div>

{% endblock %}

{% block tailjs %}
    <script type="text/javascript">
    function checkvalid() {
        var username = $("[name='username']").val();
        var oldpassword = $("[name='oldpassword']").val();
        var newpassword = $("[name='newpassword']").val();
        var confirmnewpassword = $("[name='confirmnewpassword']").val();
        var mobile_patrn = /^[+]{0,1}(\d){1,3}[ ]?([-]?((\d)|[ ]){1,12})+$/;
        var mobile = $("[name='mobile']").val();
        var email_patrn = /\w@\w*\.\w/;
        var email = $("[name='email']").val();
        var address = $("[name='address']").val();
        var zipcode_patrn = /^[a-zA-Z0-9 ]{3,12}$/;
        var zipcode = $("[name='zipcode']").val();
        var idcardtype = $("[name='idcardtype']");
        var birthday_patrn = /^(19|20)\d\d(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])$/;
        var birthday = $("[name='birthday']").val();
        var contact = $("[name='contact']").val();
        var contactmobile = $("[name='contactmobile']").val();
        if(username.length < 5 || username.length > 20) {
            $("[name='username']").select();
            return false;
        }
        if(oldpassword != "666666") {
            $("[name='oldpassword']").select();
            $("[name='oldpassword_help']").css('display','block');
            return false;
        }
        else {
            $("[name='oldpassword_help']").css('display','none');
        }
        if(newpassword.length < 6 || newpassword.length > 20) {
            $("[name='newpassword']").select();
            return false;
        }
        if(newpassword != confirmnewpassword) {
            $("[name='confirmnewpassword']").select();
            $("[name='confirmnewpassword_help']").css('display','block');
            return false;
        }
        else {
            $("[name='confirmnewpassword_help']").css('display','none');
        }
        if (!mobile_patrn.exec(mobile)) {
            $("[name='mobile']").select();
            $("[name='mobile_help']").css('display','block');
            return false;
        }
        else {
            $("[name='mobile_help']").css('display','none');
        }
        if (!email_patrn.exec(email)) {
            $("[name='email']").select();
            $("[name='email_help']").css('display','block');
            return false;
        }
        else {
            $("[name='email_help']").css('display','none');
        }
        if(address.length < 1 || address.length > 60) {
            $("[name='address']").select();
            return false;
        }
        if (!zipcode_patrn.exec(zipcode)) {
            $("[name='zipcode']").select();
            $("[name='zipcode_help']").css('display','block');
            return false;
        }
        else {
            $("[name='zipcode_help']").css('display','none');
        }
        if (idcardtype.val() == "") {
            // $("[name='idcardtype']").find("option:selected").text();
            return false;
        }
        if (!birthday_patrn.exec(birthday)) {
            $("[name='birthday']").select();
            return false;
        }
        if(contact.length < 2 || contact.length > 20) {
            $("[name='contact']").select();
            return false;
        }
        if (!mobile_patrn.exec(contactmobile)) {
            $("[name='contactmobile']").select();
            $("[name='contactmobile_help']").css('display','block');
            return false;
        }
        else {
            $("[name='contactmobile_help']").css('display','none');
        }
        return true;
    }
    </script>
{% endblock %}